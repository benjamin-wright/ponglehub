ARTEFACT start
  DEPENDS ON ../..+raw-cluster

ARTEFACT stop
  DEPENDS ON ../../+stop

DOCKERFILE vue
  FILE
    FROM node:15.5.1-alpine as builder

    WORKDIR /var/app

    COPY package*.json  ./
    RUN npm install
    COPY ./ ./

    RUN npm run build

    FROM nginx:stable-alpine as production-stage

    COPY --from=builder /var/app/dist /usr/share/nginx/html
    EXPOSE 80
    CMD ["nginx", "-g", "daemon off;"]

  IGNORE
    node_modules

ARTEFACT image
  STEP image
    DOCKERFILE vue
    CONTEXT .
    TAG localhost:5000/landing-page