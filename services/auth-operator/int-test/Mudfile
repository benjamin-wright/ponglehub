DOCKERFILE npm
  FILE
    FROM node-base

    COPY package.json ./
    RUN npm install

    COPY ./.eslintrc ./.eslintrc
    COPY ./tests ./tests
    
    ENTRYPOINT [ "npm" ]
    CMD [ "test" ]
  IGNORE
    node_modules

ARTEFACT image
  DEPENDS ON ../../../libraries/images/node+image
  DEPENDS ON ../../../libraries/node/eslint-config-ponglehub+publish
  DEPENDS ON ../../../libraries/node/async+publish

  STEP build
    DOCKERFILE npm
    TAG auth-operator-tests