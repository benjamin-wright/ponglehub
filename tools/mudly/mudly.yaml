artefacts:
- name: mudly
  pipeline:
    steps:
    - name: test
      cmd: go test ./...
    - name: build
      cmd: go build -o=bin/mudly -v ./cmd/mudly
    - name: link
      condition: "[[ ! -f /usr/local/bin/mudly ]]"
      cmd: |-
        rm -rf /usr/local/bin/mudly
        ln -s $(pwd)/bin/mudly /usr/local/bin/mudly
- name: watch
  pipeline:
    steps:
    - name: try
      watch:
      - go.mod
      cmd: cat go.mod
